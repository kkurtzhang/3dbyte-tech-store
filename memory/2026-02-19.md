# Memory Log - 2026-02-19

## Session Summary

### Build Fix
- **Issue:** TypeScript errors in `apps/backend/src/scripts/clean-test-data.ts`
- **Root Cause:** Medusa v2 API methods expect arrays, not single strings
- **Fix Applied:** 
  - `deleteProductOptions([opt.id])` instead of `deleteProductOptions(opt.id)`
  - `deleteProductVariants([variant.id])` instead of `deleteProductVariants(variant.id)`
  - `deleteProductOptionValues([optVal.id])` instead of `deleteProductOptionValues(optVal.id)`
  - Removed `deleteProductImages` call (method doesn't exist - images cascade with product deletion)
- **Commit:** `c813aff` - "fix: correct Medusa v2 API array parameters in clean-test-data script"

### Tag Design Discussion (with Kurt)
- **Question:** Should tags include category prefix (e.g., `printer:ender-3`)?
- **Decision:** NO - keep tags simple
- **Rationale:**
  - PDP rendering looks cleaner: `[ender-3]` vs `[printer:ender-3]`
  - Category is backend metadata for filtering, not display
  - Tags can belong to multiple categories if needed
- **Pattern:**
  - Tags: `ender-3`, `voron-2.4`, `brass`, `high-flow`
  - Backend: Tag has `value` + optional `category` field for admin organization

### Project Status
- **Build:** âœ… Passing
- **CMS:** Running (192.168.0.45:1337)
- **Backlog:** 2 tasks blocked (require CMS admin access)
  - Docs Page: Update CMS content for 3D printing (TDS, SDS)
  - PDP: Add rich_description content to products
- **Services:** All down (expected - no active coding work)

### Heartbeat Stats
- 34 heartbeats processed
- Commits pushed: #324, #328, #332, #336, #340, #344, #348, #352

---

## Durable Memories to Persist

### Tag Taxonomy Design (from AGENTS.md)
```
Tags (Flexible Labels):
- Printer: ender-3, voron-2.4, bambu-x1
- Material: brass, hardened-steel, ruby
- Feature: high-flow, all-metal, direct-drive
```
**Note:** These are admin categories for organization. Display shows only the tag value.

### Category Structure (from AGENTS.md)
```
/
â”œâ”€â”€ 3d-printers/
â”œâ”€â”€ filament/
â”‚   â”œâ”€â”€ pla, petg, abs-asa, tpu, specialty
â”œâ”€â”€ spare-parts/
â”‚   â”œâ”€â”€ hotends, nozzles, extruders, thermistors, heater-cartridges, beds
â”œâ”€â”€ electronics/
â”‚   â”œâ”€â”€ mainboards, displays, stepper-drivers, power-supplies
â”œâ”€â”€ motion/
â”‚   â”œâ”€â”€ linear-rails, belts, bearings, motors
â”œâ”€â”€ build-plates/
â”œâ”€â”€ tools/
â””â”€â”€ accessories/
```

---

## DREMC Import Progress (Started Feb 19, 12:45)

### Pipeline Status - Batch 1

| Step | Status | Details |
|------|--------|---------|
| Categories | âœ… Complete | 27 created (8 top-level + 19 children) |
| Brands | âœ… Complete | 56 vendors in system |
| Scraper | âœ… Complete | 50 products extracted from 14 vendors |
| Images | âš ï¸ Partial | 13 found, 37 need manual sourcing |
| Content | ğŸ”„ In Progress | @ContentWriter generating descriptions |
| Import | â³ Pending | Waiting for content completion |

### Image Sourcing Results

**Found (13 products):**
- E3D: 4 (nozzles, Revo parts)
- Micro Swiss: 4 (FlowTech hotends)
- CNC Kitchen: 2
- Trianglelab: 2
- BIGTREETECH: 1 (SKR Mini E3)

**Not Found (37 products):**
- Creality: 26 (SPA/complex pages block automation)
- Polymaker: 2, LDO: 2, Capricorn: 2
- Others: 5 (no manufacturer source in config)

### Key Technical Finding
Modern manufacturer e-commerce sites (Creality, Polymaker, etc.) use JavaScript SPAs that block automated image extraction. Need manual sourcing or alternative approach.

### Files Created
```
/apps/backend/scripts/dremc-import/
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ category-mapping.ts      # DREMC â†’ 3DByte category mapping
â”‚   â””â”€â”€ manufacturer-sources.ts  # Brand codes + website sources
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ products-batch-1.json              # 50 extracted products
â”‚   â”œâ”€â”€ products-batch-1-with-images.json  # Updated with image URLs
â”‚   â”œâ”€â”€ products-batch-1-skipped.json      # 5 DREMC brand products
â”‚   â””â”€â”€ BATCH-1-REPORT.md
â””â”€â”€ src/scripts/
    â”œâ”€â”€ create-categories.ts
    â””â”€â”€ create-brands.ts
```

### Backend Scripts Created
- `src/scripts/create-categories.ts` - Creates category hierarchy
- `src/scripts/create-brands.ts` - Sets up brand entities

### Medusa v2 API Key
```
PUBLISHABLE_KEY: pk_02d0df7032093e813cfad67fe27d10c1c3130797c0ec2e17eefe6f880da5382c
```
Location: `apps/storefront-v3/.env`
